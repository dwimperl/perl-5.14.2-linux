.\" Automatically generated by Pod::Man 2.25 (Pod::Simple 3.16)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "PERL5131DELTA 1"
.TH PERL5131DELTA 1 "2011-09-26" "perl v5.14.2" "Perl Programmers Reference Guide"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
perl5131delta \- what is new for perl v5.13.1
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
This document describes differences between the 5.13.0 release and
the 5.13.1 release.
.PP
If you are upgrading from an earlier release such as 5.10, first read
perl5120delta, which describes differences between 5.10 and
5.12.
.SH "Incompatible Changes"
.IX Header "Incompatible Changes"
.ie n .SS """""\ec\fIX\fP"""""
.el .SS "``\f(CW\ec\fP\f(CIX\fP\f(CW\fP''"
.IX Subsection """cX"""
The backslash-c construct was designed as a way of specifying
non-printable characters, but there were no restrictions (on \s-1ASCII\s0
platforms) on what the character following the \f(CW\*(C`c\*(C'\fR could be.  Now, that
character must be one of the \s-1ASCII\s0 characters.
.SS "localised tied hashes, arrays and scalars are no longed tied"
.IX Subsection "localised tied hashes, arrays and scalars are no longed tied"
In the following:
.PP
.Vb 6
\&    tie @a, ...;
\&    {
\&        local @a;
\&        # here, @a is a now a new, untied array
\&    }
\&    # here, @a refers again to the old, tied array
.Ve
.PP
The new local array used to be made tied too, which was fairly pointless,
and has now been fixed. This fix could however potentially cause a change
in behaviour of some code.
.ie n .SS """given"" return values"
.el .SS "\f(CWgiven\fP return values"
.IX Subsection "given return values"
Starting from this release, \f(CW\*(C`given\*(C'\fR blocks returns the last evaluated
expression, or an empty list if the block was exited by \f(CW\*(C`break\*(C'\fR. Thus you
can now write:
.PP
.Vb 8
\&    my $type = do {
\&     given ($num) {
\&      break     when undef;
\&      \*(Aqinteger\*(Aq when /^[+\-]?[0\-9]+$/;
\&      \*(Aqfloat\*(Aq   when /^[+\-]?[0\-9]+(?:\e.[0\-9]+)?$/;
\&      \*(Aqunknown\*(Aq;
\&     }
\&    };
.Ve
.PP
See \*(L"Return value\*(R" in perlsyn for details.
.SH "Core Enhancements"
.IX Header "Core Enhancements"
.SS "Exception Handling Reliability"
.IX Subsection "Exception Handling Reliability"
Several changes have been made to the way \f(CW\*(C`die\*(C'\fR, \f(CW\*(C`warn\*(C'\fR, and \f(CW$@\fR
behave, in order to make them more reliable and consistent.
.PP
When an exception is thrown inside an \f(CW\*(C`eval\*(C'\fR, the exception is no
longer at risk of being clobbered by code running during unwinding
(e.g., destructors).  Previously, the exception was written into \f(CW$@\fR
early in the throwing process, and would be overwritten if \f(CW\*(C`eval\*(C'\fR was
used internally in the destructor for an object that had to be freed
while exiting from the outer \f(CW\*(C`eval\*(C'\fR.  Now the exception is written
into \f(CW$@\fR last thing before exiting the outer \f(CW\*(C`eval\*(C'\fR, so the code
running immediately thereafter can rely on the value in \f(CW$@\fR correctly
corresponding to that \f(CW\*(C`eval\*(C'\fR.
.PP
Likewise, a \f(CW\*(C`local $@\*(C'\fR inside an \f(CW\*(C`eval\*(C'\fR will no longer clobber any
exception thrown in its scope.  Previously, the restoration of \f(CW$@\fR upon
unwinding would overwrite any exception being thrown.  Now the exception
gets to the \f(CW\*(C`eval\*(C'\fR anyway.  So \f(CW\*(C`local $@\*(C'\fR is safe inside an \f(CW\*(C`eval\*(C'\fR,
albeit of rather limited use.
.PP
Exceptions thrown from object destructors no longer modify the \f(CW$@\fR
of the surrounding context.  (If the surrounding context was exception
unwinding, this used to be another way to clobber the exception being
thrown.  Due to the above change it no longer has that significance,
but there are other situations where \f(CW$@\fR is significant.)  Previously
such an exception was sometimes emitted as a warning, and then either
string-appended to the surrounding \f(CW$@\fR or completely replaced the
surrounding \f(CW$@\fR, depending on whether that exception and the surrounding
\&\f(CW$@\fR were strings or objects.  Now, an exception in this situation is
always emitted as a warning, leaving the surrounding \f(CW$@\fR untouched.
In addition to object destructors, this also affects any function call
performed by \s-1XS\s0 code using the \f(CW\*(C`G_KEEPERR\*(C'\fR flag.
.PP
\&\f(CW$@\fR is also no longer used as an internal temporary variable when
preparing to \f(CW\*(C`die\*(C'\fR.  Previously it was internally necessary to put
any exception object (any non-string exception) into \f(CW$@\fR first,
before it could be used as an exception.  (The C \s-1API\s0 still offers the
old option, so an \s-1XS\s0 module might still clobber \f(CW$@\fR in the old way.)
This change together with the foregoing means that, in various places,
\&\f(CW$@\fR may be observed to contain its previously-assigned value, rather
than having been overwritten by recent exception-related activity.
.PP
Warnings for \f(CW\*(C`warn\*(C'\fR can now be objects, in the same way as exceptions
for \f(CW\*(C`die\*(C'\fR.  If an object-based warning gets the default handling,
of writing to standard error, it will of course still be stringified
along the way.  But a \f(CW$SIG{_\|_WARN_\|_}\fR handler will now receive an
object-based warning as an object, where previously it was passed the
result of stringifying the object.
.SH "Modules and Pragmata"
.IX Header "Modules and Pragmata"
.SS "Updated Modules"
.IX Subsection "Updated Modules"
.ie n .IP """Errno""" 4
.el .IP "\f(CWErrno\fR" 4
.IX Item "Errno"
The implementation of \f(CW\*(C`Errno\*(C'\fR has been refactored to use about 55% less memory.
There should be no user-visible changes.
.ie n .IP "Perl 4 "".pl"" libraries" 4
.el .IP "Perl 4 \f(CW.pl\fR libraries" 4
.IX Item "Perl 4 .pl libraries"
These historical libraries have been minimally modified to avoid using
\&\f(CW$[\fR.  This is to prepare them for the deprecation of \f(CW$[\fR.
.ie n .IP """B::Deparse""" 4
.el .IP "\f(CWB::Deparse\fR" 4
.IX Item "B::Deparse"
A bug has been fixed when deparsing a nextstate op that has both a
change of package (relative to the previous nextstate), or a change of
\&\f(CW\*(C`%^H\*(C'\fR or other state, and a label.  Previously the label was emitted
first, leading to syntactically invalid output because a label is not
permitted immediately before a package declaration, \fB\s-1BEGIN\s0\fR block,
or some other things.  Now the label is emitted last.
.SS "Removed Modules and Pragmata"
.IX Subsection "Removed Modules and Pragmata"
The following modules have been removed from the core distribution, and if
needed should be installed from \s-1CPAN\s0 instead.
.ie n .IP """Class::ISA""" 4
.el .IP "\f(CWClass::ISA\fR" 4
.IX Item "Class::ISA"
.PD 0
.ie n .IP """Pod::Plainer""" 4
.el .IP "\f(CWPod::Plainer\fR" 4
.IX Item "Pod::Plainer"
.ie n .IP """Switch""" 4
.el .IP "\f(CWSwitch\fR" 4
.IX Item "Switch"
.PD
.PP
The removal of \f(CW\*(C`Shell\*(C'\fR has been deferred until after 5.14, as the
implementation of \f(CW\*(C`Shell\*(C'\fR shipped with 5.12.0 did not correctly issue the
warning that it was to be removed from core.
.SH "New Documentation"
.IX Header "New Documentation"
.IP "perlgpl" 4
.IX Item "perlgpl"
perlgpl has been updated to contain \s-1GPL\s0 version 1, as is included in the
\&\fI\s-1README\s0\fR distributed with perl.
.SH "Selected Bug Fixes"
.IX Header "Selected Bug Fixes"
.IP "\(bu" 4
Naming a deprecated character in \eN{...} will not leak memory.
.IP "\(bu" 4
\&\s-1FETCH\s0 is no longer called needlessly on some tied variables.
.IP "\(bu" 4
The trie runtime code should no longer allocate massive amounts of memory,
fixing #74484.
.SH "Changed Internals"
.IX Header "Changed Internals"
.IP "\(bu" 4
The protocol for unwinding the C stack at the last stage of a \f(CW\*(C`die\*(C'\fR
has changed how it identifies the target stack frame.  This now uses
a separate variable \f(CW\*(C`PL_restartjmpenv\*(C'\fR, where previously it relied on
the \f(CW\*(C`blk_eval.cur_top_env\*(C'\fR pointer in the \f(CW\*(C`eval\*(C'\fR context frame that
has nominally just been discarded.  This change means that code running
during various stages of Perl-level unwinding no longer needs to take
care to avoid destroying the ghost frame.
.IP "\(bu" 4
The format of entries on the scope stack has been changed, resulting in a
reduction of memory usage of about 10%. In particular, the memory used by
the scope stack to record each active lexical variable has been halved.
.IP "\(bu" 4
Memory allocation for pointer tables has been changed. Previously
\&\f(CW\*(C`Perl_ptr_table_store\*(C'\fR allocated memory from the same arena system as \f(CW\*(C`SV\*(C'\fR
bodies and \f(CW\*(C`HE\*(C'\fRs, with freed memory remaining bound to those arenas until
interpreter exit. Now it allocates memory from arenas private to the specific
pointer table, and that memory is returned to the system when
\&\f(CW\*(C`Perl_ptr_table_free\*(C'\fR is called. Additionally, allocation and release are both
less \s-1CPU\s0 intensive.
.IP "\(bu" 4
A new function, Perl_magic_methcall has been added that wraps the setup needed
to call a magic method like \s-1FETCH\s0 (the existing S_magic_methcall function has
been renamed S_magic_methcall1).
.SH "Deprecations"
.IX Header "Deprecations"
The following items are now deprecated.
.ie n .IP """Perl_ptr_table_clear""" 4
.el .IP "\f(CWPerl_ptr_table_clear\fR" 4
.IX Item "Perl_ptr_table_clear"
\&\f(CW\*(C`Perl_ptr_table_clear\*(C'\fR is no longer part of Perl's public \s-1API\s0. Calling it now
generates a deprecation warning, and it will be removed in a future
release.
.SH "Acknowledgements"
.IX Header "Acknowledgements"
Perl 5.13.1 represents thirty days of development since Perl 5.13.0 and
contains 15390 lines of changes across 289 files from 34 authors and
committers.
.PP
Thank you to the following for contributing to this release:
.PP
\&\*(AEvar Arnfjo\*:r\*(d- Bjarmason, Arkturuz, Chris 'BinGOs' Williams, Craig A. Berry,
Curtis Jewell, Dan Dascalescu, David Golden, David Mitchell, Father
Chrysostomos, Gene Sullivan, gfx, Gisle Aas, H.Merijn Brand, James E Keenan,
James Mastros, Jan Dubois, Jesse Vincent, Karl Williamson, Leon Brocard,
Lubomir Rintel (GoodData), Nicholas Clark, Philippe Bruhat (BooK), Rafael
Garcia-Suarez, Rainer Tammer, Ricardo Signes, Richard Soderberg, Robin Barker,
Ruslan Zakirov, Steffen Mueller, Todd Rinaldo, Tony Cook, Vincent Pit, Zefram
.SH "Reporting Bugs"
.IX Header "Reporting Bugs"
If you find what you think is a bug, you might check the articles
recently posted to the comp.lang.perl.misc newsgroup and the perl
bug database at http://rt.perl.org/perlbug/ .  There may also be
information at http://www.perl.org/ , the Perl Home Page.
.PP
If you believe you have an unreported bug, please run the \fBperlbug\fR
program included with your release.  Be sure to trim your bug down
to a tiny but sufficient test case.  Your bug report, along with the
output of \f(CW\*(C`perl \-V\*(C'\fR, will be sent off to perlbug@perl.org to be
analysed by the Perl porting team.
.PP
If the bug you are reporting has security implications, which make it
inappropriate to send to a publicly archived mailing list, then please send
it to perl5\-security\-report@perl.org. This points to a closed subscription
unarchived mailing list, which includes all the core committers, who be able
to help assess the impact of issues, figure out a resolution, and help
co-ordinate the release of patches to mitigate or fix the problem across all
platforms on which Perl is supported. Please only use this address for
security issues in the Perl core, not for modules independently
distributed on \s-1CPAN\s0.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
The \fIChanges\fR file for an explanation of how to view exhaustive details
on what changed.
.PP
The \fI\s-1INSTALL\s0\fR file for how to build Perl.
.PP
The \fI\s-1README\s0\fR file for general stuff.
.PP
The \fIArtistic\fR and \fICopying\fR files for copyright information.
